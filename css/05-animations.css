/*
 * css/enhanced3 05-animations.css - Animations & Effects with Refined Message Animations
 * 
 * Purpose: All animations, keyframes, transitions, and visual effects with refined message animations
 * Used by: Hero sparkles, chatbot animation, marquee, hover effects
 * Dependencies: 00-variables.css (animation timing variables)
 * Related: 03-sections.css (hero section), 04-components.css (component animations)
 * 
 * LLM Working Notes:
 * - ENHANCED: Subtle depth and layering effects added
 * - ENHANCED: Professional glass morphism with noise texture and reflections
 * - ENHANCED2: Message pop effects with elastic easing
 * - ENHANCED2: Glow pulse animations for AI messages
 * - ENHANCED2: Gradient animations on message bubbles
 * - ENHANCED3: REMOVED shimmer effect (white box issue)
 * - ENHANCED3: REDUCED glow pulse intensity for subtlety
 * - All animations are performance-optimized with transform and opacity
 * - Respects user's reduced motion preferences
 * - Hardware acceleration enabled where beneficial
 * - Complex animations are contained within their sections for maintainability
 * 
 * Animation Categories:
 * - Sparkle system: Background decorative animations for hero section
 * - Chatbot animations: Typing effects and message appearance
 * - Marquee animation: Logo scrolling system
 * - Micro-interactions: Button hovers, card lifts, transitions
 * - Accessibility: Reduced motion support throughout
 */

/* ===== SPARKLE BACKGROUND SYSTEM ===== */
@layer animations {
    /* Sparkles container - positioned behind hero content */
    .sparkles-container {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 1;                             /* Below content but above gradient */
    }
    
    /* Base sparkle styling */
    .sparkle {
        position: absolute;
        filter: blur(15px);
        opacity: 0.7;
    }
    
    /* Sparkle cross pattern using pseudo-elements */
    .sparkle::before,
    .sparkle::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: radial-gradient(ellipse at center, currentColor 0%, currentColor 40%, transparent 70%);
    }
    
    /* Horizontal bar of sparkle cross */
    .sparkle::before { 
        width: 100%; 
        height: 40%; 
    }
    
    /* Vertical bar of sparkle cross */
    .sparkle::after { 
        width: 40%; 
        height: 100%; 
    }
    
    /* ===== INDIVIDUAL SPARKLE CONFIGURATIONS ===== */
    
    /* Edge-moving sparkle - travels around screen perimeter */
    .sparkle-2 { 
        width: clamp(190px, 23vw, 365px); 
        height: clamp(190px, 23vw, 365px); 
        color: var(--color-sparkle-pink); 
        animation: edgeMove2 70s infinite linear;
        animation-delay: -8s; 
    }
    
    /* Bottom-left sparkle - figure-8 pattern */
    .sparkle-bottom-left {
        width: clamp(370px, 40vw, 700px);
        height: clamp(370px, 40vw, 700px);
        color: var(--color-sparkle-pink);
        animation: bottomLeftMove 31s infinite linear;
        animation-delay: -4s;
    }
    
    /* Counter-rotation for sparkle elements */
    .sparkle-2::before,
    .sparkle-2::after {
        animation-direction: reverse;
        animation-duration: 30s;
    }
    
    /* ===== SPARKLE KEYFRAME ANIMATIONS ===== */
    
    /* Edge movement - travels around screen perimeter with rotation */
    @keyframes edgeMove2 {
        0%   { top: -150px; right: -150px; transform: rotate(0deg); } 
        25%  { top: calc(100% - 170px); right: -150px; transform: rotate(-90deg); } 
        50%  { top: calc(100% - 170px); right: calc(100% - 170px); transform: rotate(-180deg); } 
        75%  { top: -150px; right: calc(100% - 170px); transform: rotate(-270deg); } 
        100% { top: -150px; right: -150px; transform: rotate(-360deg); } 
    }
    
    /* Bottom-left movement - organic flowing pattern */
    @keyframes bottomLeftMove {
        0%   { top: 100%; left: -5%; transform: rotate(-45deg); opacity: 0.5; }
        25%  { top: 50%;  left: 20%; transform: rotate(-135deg); opacity: 0.8; }
        50%  { top: 80%;  left: 15%; transform: rotate(-225deg); opacity: 0.6; }
        75%  { top: 60%;  left: -2%; transform: rotate(-315deg); opacity: 0.9; }
        100% { top: 100%; left: -5%; transform: rotate(-405deg); opacity: 0.5; }
    }
    
    /* ===== SPARKLE RESPONSIVE ADJUSTMENTS ===== */
    @media (width <= 768px) {
        .sparkle { 
            filter: blur(10px);                 /* Less blur on mobile */
        }
        
        .sparkle-2 { 
            width: 190px; 
            height: 190px; 
        }
        
        .sparkle-bottom-left { 
            width: 370px; 
            height: 370px; 
        }
    }
    
    /* Large screens */
    @media (width >= 100em) {
        .sparkle-2 { 
            width: 448px; 
            height: 448px; 
        }
    }
    
    /* ===== REDUCED MOTION SUPPORT FOR SPARKLES ===== */
    @media (prefers-reduced-motion: reduce) {
        .sparkle {
            animation: none !important;
            opacity: 0.3;                       /* Static, dimmed sparkles */
        }
    }
}

/* ===== ENHANCED CHATBOT ANIMATION SYSTEM ===== */
@layer animations {
    /* Enhanced animation timing variables */
    :root {
        --spring-easing: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        --smooth-easing: cubic-bezier(0.4, 0, 0.2, 1);
        --bounce-easing: cubic-bezier(0.175, 0.885, 0.32, 1.275);
        /* RESTORED: Elastic easing for more dynamic animations */
        /* To revert: Change back to cubic-bezier(0.4, 0, 0.2, 1) */
        --elastic-easing: cubic-bezier(0.68, -0.6, 0.32, 1.6);
        
        /* Typing indicator */
        --typing-dot-size: 5px;
        --typing-dot-gap: 6px;
                    --typing-cycle-duration: 1.8s;
        --typing-glow-color: rgba(255, 255, 255, 0.4);
        
        /* AI message gradient colors - Brand pink variations */
        --color-ai-gradient-light: #ff5cad;    /* Bright coral pink */
        --color-ai-gradient-mid: #ff0088;      /* Brand pink */
        --color-ai-gradient-dark: #d90070;     /* Rich magenta */
        
        /* ENHANCED: Glass morphism variables */
        --glass-blur: 20px;
        --glass-saturation: 180%;
        --glass-noise-opacity: 0.02;
        --glass-reflection-opacity: 0.1;
    }
    
    /* Remove any styling from parent elements */
    .hero-animation {
        background: transparent !important;
    }

    /* ENHANCED: Chatbot container with professional glass morphism */
    .chatbot-container {
        position: relative;
        inline-size: 100%;
        block-size: 100%;
        padding: 0; /* Remove default padding */
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        background: transparent; /* Move gradient to inner div */
        border: none;
        box-shadow: none;
        overflow: hidden; /* Must be hidden to clip to rounded corners */
        border-radius: 24px; /* Match outer radius initially */
        max-block-size: 100%;
        min-block-size: 100%;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    
    /* Create gradient background - only when NOT device frame */
    .chatbot-container:not(.device-frame)::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(
            135deg,
            #FFFCF9 0%,
            #FFFFF9 25%,
            #FFF9F2 50%,
            #FFF2F9 75%,
            #FFFCF9 100%
        );
        background-size: 200% 200%;
        background-position: 0% 0%;
        animation: chatbotGradientShift 20s ease-in-out infinite;
        border-radius: 24px; /* Match container radius */
        z-index: 0;
        pointer-events: none;
    }
    
    /* DEVICE FRAME EFFECT - TEMPORARILY DISABLED FOR TESTING */
    /* TO ROLLBACK: Uncomment the entire block below to restore device frame */
    /*
    .chatbot-container.device-frame {
        padding: 20px;
        border: none;
        border-radius: 24px;
        box-shadow: none;
        overflow: hidden;
        position: relative;
        background: rgba(255, 255, 255, 0.6);
    }
    
    .chatbot-container.device-frame::after {
        content: '';
        position: absolute;
        inset: 20px;
        background: linear-gradient(
            135deg,
            #FFFCF9 0%,
            #FFFFF9 25%,
            #FFF9F2 50%,
            #FFF2F9 75%,
            #FFFCF9 100%
        );
        background-size: 200% 200%;
        background-position: 0% 0%;
        animation: chatbotGradientShift 20s ease-in-out infinite;
        border-radius: 10px;
        z-index: 0;
        pointer-events: none;
    }
    */
    /* END DEVICE FRAME EFFECT - DISABLED */
    
    /* RESTORED: Glass morphism effects */
    /* To revert: Change display back to 'none' in both pseudo-elements */
    
    /* ENHANCED: Noise texture overlay - disabled due to gradient implementation */
    /* Noise texture removed to simplify gradient rendering */
    
    /* Remove this overly broad rule that was breaking AI message gradients */
    
    /* ENHANCED: Moving rainbow reflection - DISABLED to prevent multiple gradients */
    .chatbot-container::before {
        display: none; /* Disabled to prevent multiple gradient layers */
    }
    
    @keyframes rainbowRotate {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    /* END RESTORED: Glass morphism effects */
    
    /* ENHANCED: Glass reflection animation - disabled to prevent wobbling */
    @keyframes glassReflection {
        0% { transform: rotate(0deg) translateZ(0); }
        100% { transform: rotate(0deg) translateZ(0); }
    }
    
    /* Subtle gradient shift animation */
    @keyframes chatbotGradientShift {
        0%, 100% { 
            background-position: 0% 0%; 
        }
        50% { 
            background-position: 100% 100%; 
        }
    }
    
    /* Chrome, Safari and Opera - hide scrollbar */
    .chatbot-container::-webkit-scrollbar {
        width: 0;
        height: 0;
        display: none;
    }
    
    
    /* Hover state - disabled to prevent frame */
    .chatbot-container:hover {
        /* No hover effects */
    }
    
    /* ENHANCED: Active state for interactivity */
    .chatbot-container.chat-active {
        /* Removed animations to prevent wobbling */
    }
    
    
    /* ===== CHAT MESSAGE ANIMATIONS ===== */
    
    /* Chat messages container */
    .chat-messages {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;  /* Reduced gap to save vertical space */
        overflow: hidden;
        scrollbar-width: none;                  /* Firefox - hide scrollbar */
        -ms-overflow-style: none;               /* IE and Edge - hide scrollbar */
        padding: 20px;                          /* Even padding all around */
        justify-content: flex-end;              /* Push messages to bottom */
        /* REMOVED: Smooth scrolling since we're disabling scrolling */
        box-sizing: border-box;
        max-block-size: 100%;
        min-block-size: 0;
        position: relative;                     /* For gradient overlay positioning */
        pointer-events: none; /* Disable all pointer interactions */
        z-index: 1; /* Above the gradient background */
        max-inline-size: calc(100% - 60px);     /* Constrain width to align with nav edge */
        margin-inline-start: auto;              /* Push container to the right */
        inline-size: 100%;
    }
    
    /* Adjust padding when device frame is active - DISABLED FOR TESTING */
    /* TO ROLLBACK: Uncomment this block when restoring device frame */
    /*
    .chatbot-container.device-frame .chat-messages {
        padding: 30px 20px 30px 20px;
        margin: 0;
        border-radius: 10px;
        overflow-y: auto;
        overflow-x: hidden;
        height: 100%;
        box-sizing: border-box;
        position: relative;
        z-index: 1;
        background: transparent;
        border: none;
        box-shadow: none;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
    }
    */
    
    /* Re-enable pointer events for child elements */
    .chat-messages > * {
        pointer-events: auto;
    }
    
    /* Spacer is defined elsewhere, remove this conflicting rule */
    
    /* Chrome, Safari and Opera - hide scrollbar */
    .chat-messages::-webkit-scrollbar {
        width: 0;
        height: 0;
        display: none;
    }
    
    /* Enhanced individual chat message bubbles */
    .chat-message {
        display: flex;
        align-items: flex-end;
        max-inline-size: 100%;
        inline-size: 100%;
        overflow: visible;
        padding: 2px 0;
        position: relative;                     /* Ensure messages stay above gradient */
        opacity: 0;                             /* Initially hidden until animation */
        /* Transform moved to specific message types below */
        /* RESTORED: Elastic easing for bouncier message entrance */
        /* To revert: Change transform timing back to cubic-bezier(0.4, 0, 0.2, 1) */
        transition: opacity 0.5s ease, transform 0.5s var(--elastic-easing);
    }
    
    /* RESTORED: Side slide-in animations for more dynamic entrance */
    /* To revert: Remove this block and add back transform: translateY(20px) to .chat-message above */
    .chat-message.from-user {
        transform: translateY(30px) translateX(-20px) scale(0.9);  /* Start smaller, left and down */
    }
    
    .chat-message.from-ai {
        transform: translateY(30px) translateX(20px) scale(0.9);   /* Start smaller, right and down */
    }
    /* END RESTORED: Side slide-in animations */
    
    /* ENHANCEMENT: Professional scale and blur transitions */
    /* To revert: Remove this entire section */
    .chat-message p {
        filter: blur(0);
        transform: scale(1);
        transition: 
            filter 0.4s ease-out,
            transform 0.6s var(--elastic-easing),
            opacity 0.4s ease-out;
        transform-origin: center center;
        will-change: transform, filter, opacity;
    }
    
    /* Initial state - more dramatic scale for better pop effect */
    .chat-message:not(.visible) p {
        filter: blur(8px);
        transform: scale(0.4) rotate(-5deg); /* Much smaller with rotation */
        opacity: 0;
    }
    
    /* Enhance the visible state transition */
    .chat-message.visible p {
        filter: blur(0);
        transform: scale(1);
        opacity: 1;
        transition-delay: 0.05s; /* Faster response */
        animation: bubblePopEnhanced 0.8s var(--elastic-easing) forwards;
    }
    
    /* Enhanced bubble pop animation with more dramatic bounce */
    @keyframes bubblePopEnhanced {
        0% {
            transform: scale(0.5) rotate(-5deg); /* Start very small with slight rotation */
            opacity: 0;
        }
        30% {
            opacity: 1;
            transform: scale(0.8) rotate(2deg);
        }
        60% {
            transform: scale(1.15) rotate(-1deg); /* More pronounced overshoot */
        }
        80% {
            transform: scale(0.92) rotate(0deg); /* Stronger pullback */
        }
        100% {
            transform: scale(1) rotate(0deg);
        }
    }
    /* END ENHANCEMENT: Professional scale and blur transitions */
    
    /* Make messages visible when animated - slides to center */
    .chat-message.visible {
        opacity: 1;
        transform: translateY(0) translateX(0) scale(1);  /* End at center position and full size */
    }
    
    /* ENHANCEMENT: Subtle emphasis animation when message appears */
    /* To revert: Remove this entire block */
    .chat-message.visible.message-emphasis {
        animation: subtleEmphasis 0.8s ease-out forwards;
        animation-delay: 0.2s;
    }
    
    @keyframes subtleEmphasis {
        0% {
            filter: brightness(1);
        }
        50% {
            filter: brightness(1.1) contrast(1.05);
            transform: translateY(0) translateX(0) scale(1.03);
        }
        100% {
            filter: brightness(1);
            transform: translateY(0) translateX(0) scale(1);
        }
    }
    /* END ENHANCEMENT: Subtle emphasis */
    
    /* ADDED: Fade out animation for smooth reset */
    .chat-message.fade-out {
        opacity: 0;
        transition: opacity 0.8s ease-out;
    }
    
    /* Special handling for last message to ensure visibility */
    .chat-message:last-child {
        margin-block-end: 0;                    /* No extra margin needed */
    }
    
    /* Ensure messages don't clip */
    .chat-message {
        flex-shrink: 0; /* Prevent messages from shrinking */
    }
    
    /* Ensure the last message is always fully visible */
    .chat-message p {
        flex-shrink: 0; /* Prevent text from shrinking */
        min-height: fit-content;
    }
    
    /* Message positioning and entry animations */
    .chat-message.from-user {
        justify-content: flex-start;
        padding-inline-end: 0;                  /* No extra padding - uses container padding */
    }
    
    .chat-message.from-ai {
        justify-content: flex-end;
        padding-inline-start: 0;                /* No extra padding - uses container padding */
    }
    
    /* Removed visible class - not needed */
    
    /* ===== ENHANCED MESSAGE BUBBLE STYLING ===== */
    .chat-message p {
        padding: 24px 28px 28px; /* Balanced padding */
        border-radius: 28px;
        font-size: 20px;
        line-height: 1.65; /* Slightly increased for better readability */
        position: relative;
        max-inline-size: min(380px, 85%);
        inline-size: fit-content;
        font-weight: 400;
        /* Static display - no opacity changes */
        overflow: visible;
        word-wrap: break-word;
        word-break: normal;
        white-space: normal;
        display: inline-block;
        box-sizing: border-box;
        min-block-size: 1em;
    }
    
    /* ENHANCED: User message with subtle depth */
    .chat-message.from-user p {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        color: var(--color-text-primary);
        border-block-end-inline-start-radius: 8px;
        /* Reduced shadow for more subtle effect */
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    /* ENHANCED: AI message with premium glass effect */
    .chat-message.from-ai p {
        /* Gradient background restored with !important to override any inheritance */
        background: linear-gradient(
            135deg, 
            var(--color-ai-gradient-light) 0%,
            var(--color-ai-gradient-mid) 60%,
            var(--color-ai-gradient-dark) 100%
        ) !important;
        color: white !important;
        border-block-end-inline-end-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        /* Single shadow to prevent repaints */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        min-block-size: fit-content;
        overflow-wrap: break-word;
        word-break: break-word; /* Ensure long words break properly */
        /* hyphens removed - can cause text reflow */
        /* text-rendering: optimizeLegibility; REMOVED - can cause shimmer */
        position: relative;
        /* Prevent text clipping */
        overflow: visible !important;
    }
    
    /* RESTORED: Initial glow that fades for AI messages */
    /* To revert: Remove this entire block */
    .chat-message.from-ai.visible p {
        animation: aiGlowFade 1.5s ease-out forwards;
        animation-delay: 0.2s;  /* Small delay so glow appears after message slides in */
    }
    
    @keyframes aiGlowFade {
        0% {
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                0 0 30px rgba(255, 0, 136, 0.3);  /* Start with pink glow */
        }
        100% {
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1);  /* End with just the base shadow */
        }
    }
    /* END RESTORED: Initial glow that fades */
    
    /* Hide empty message bubbles */
    .chat-message p:empty {
        display: none;
    }
    
    
    /* ENHANCED3: REMOVED shimmer effect that was causing white box issue */
    /* The ::before pseudo-element with shimmer animation has been completely removed */
    
    /* ENHANCED3: No animation to prevent wobbling */
    .chat-message.from-ai.visible p {
        /* Removed glow pulse animation */
    }
    
    /* REMOVED - glow pulse animation */
    
    /* Message appearance - static display */
    
    /* REMOVED animations to stop wobbling */
    .chat-message.from-user.visible p {
        /* animation removed */
    }
    
    .chat-message.from-ai.visible p {
        /* animation removed */
    }
    
    /* REMOVED - message pop animations */
    
    /* Hover states - disabled to prevent wobble */
    .chat-message p {
        /* No transition to prevent wobble */
    }
    
    .chat-message p:hover {
        /* No transform on hover */
    }
    
    .chat-message.from-user p:hover {
        /* No hover effects - removed to prevent errors */
    }
    
    /* AI message hover - removed */
    .chat-message.from-ai p:hover {
        /* No hover effects - removed to prevent errors */
    }
    
    /* ===== TYPING INDICATORS ===== */
    
    /* Typing cursor animation */
    .chat-message p.typing-cursor {
        min-block-size: 1.5em;
    }
    
    .chat-message p.typing-cursor::after {
        content: '|';
        margin-inline-start: 2px;
        opacity: 1;
        animation: blink 1s infinite;
        color: currentColor;
        font-weight: 300;
    }
    
    @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }
    
    /* Enhanced three dots typing indicator */
    .typing-indicator {
        display: inline-flex;
        gap: var(--typing-dot-gap);
        padding-inline: 8px;
        align-items: center;
        position: relative;
        min-block-size: 20px;
        vertical-align: middle;
        background: transparent;
    }
    
    .typing-indicator span {
        position: relative;
        inline-size: var(--typing-dot-size);
        block-size: var(--typing-dot-size);
        background: rgba(255, 255, 255, 0.8);   /* White dots on pink background */
        border-radius: 50%;
        opacity: 0.5;
        transform: scale(0.8);
        /* Removed will-change to prevent issues */
        box-shadow: 0 0 2px rgba(255, 0, 136, 0.2);
    }
    
    /* ENHANCED: Sophisticated staggered typing dots */
    /* To revert: Replace this entire section with the original above */
    .typing-indicator span {
        animation: dotWave 1.4s infinite ease-in-out, dotGlow 1.4s infinite ease-in-out;
    }
    
    .typing-indicator span:nth-child(1) {
        animation-delay: 0s;
    }
    
    .typing-indicator span:nth-child(2) {
        animation-delay: 0.12s;
    }
    
    .typing-indicator span:nth-child(3) {
        animation-delay: 0.24s;
    }
    
    @keyframes dotWave {
        0%, 60%, 100% { 
            opacity: 0.4; 
            transform: scale(0.8) translateY(0);
        }
        30% { 
            opacity: 1; 
            transform: scale(1.1) translateY(-6px);
            filter: brightness(1.2);
        }
    }
    
    /* Add subtle glow to active dot */
    .typing-indicator span {
        transition: box-shadow 0.3s ease;
    }
    
    @keyframes dotGlow {
        0%, 60%, 100% {
            box-shadow: 0 0 0 rgba(255, 255, 255, 0);
        }
        30% {
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
        }
    }
    /* END ENHANCED: Sophisticated staggered typing dots */
    
    /* ===== CHATBOT RESPONSIVE ADJUSTMENTS ===== */
    @media (width <= 768px) {
        .chatbot-container {
            padding: 2rem;
            min-block-size: 100%;               /* Ensure fixed height on mobile */
        }
        
        /* Reduce glass morphism intensity on mobile for performance */
        .chatbot-container {
            --glass-blur: 14px;
            --glass-saturation: 160%;
        }
        
        .chat-messages {
            gap: 16px;
            padding: 20px 15px 150px 15px;       /* Keep original mobile padding */
            max-inline-size: 100%;                /* Full width on mobile */
            margin-inline-start: 0;               /* No margin on mobile */
        }
        
        /* Maintain device frame adjustments on mobile - DISABLED FOR TESTING */
        /* TO ROLLBACK: Uncomment when restoring device frame */
        /*
        .chatbot-container.device-frame .chat-messages {
            padding: 20px 20px 30px 20px;
            margin: 0;
            justify-content: flex-end;
        }
        */
        
        /* Reduce gradient overlay height on mobile */
        .chat-messages::after {
            block-size: 40px;
        }
        
        .chat-message p {
            font-size: 18px;
            padding: 22px 24px 24px;
            border-radius: 24px;
            max-inline-size: 90%;
            text-align: left !important;         /* Force left alignment on mobile */
        }
        
        /* Ensure proper text sizing on mobile */
        .chat-message.from-user p {
            font-size: 18px;
        }
        
        .chat-message.from-ai p {
            font-size: 18px;
        }
        
        /* Specific handling for the longest message on mobile */
        .chat-message[data-message="2"] p {
            max-inline-size: min(320px, 90%);
        }
        
        /* Ensure last message stays visible on mobile */
        .chat-message:last-child {
            margin-block-end: 15px;
        }
        
        /* REMOVED - animation on mobile */
    }
    
    /* Ensure text is always contained within bubbles */
    .chat-message p {
        overflow: hidden;
        text-overflow: clip;
        position: relative;
        z-index: 1;
    }
    
    /* Specific handling for the longest message */
    .chat-message[data-message="2"] p {
        max-inline-size: min(380px, 85%);
    }
    
    /* Ensure AI message that contains the clipping text has enough space */
    .chat-message[data-message="4"] p {
        padding: 24px 28px 30px; /* Balanced padding */
        line-height: 1.65; /* Good line height for readability */
        max-inline-size: min(350px, 80%); /* Slightly wider for better text flow */
    }
    
    /* Add small spacer after last message to prevent clipping */
    .chat-messages::after {
        content: '';
        display: block;
        height: 20px; /* Small spacer to ensure last message has breathing room */
        flex-shrink: 0;
    }
}

/* ===== MARQUEE ANIMATION SYSTEM ===== */
@layer animations {
    /* Base marquee animation - moves logos smoothly left */
    @keyframes marquee {
        from {
            transform: translateX(0);
        }
        to {
            transform: translateX(-50%);        /* Move exactly half width for seamless loop */
        }
    }
    
    /* Reduced motion support for marquee */
    @media (prefers-reduced-motion: reduce) {
        .marquee__track {
            animation-duration: 300s;           /* Much slower animation */
        }
    }
}

/* ===== ACCESSIBILITY - REDUCED MOTION SUPPORT ===== */
@layer animations {
    /* Global reduced motion overrides */
    @media (prefers-reduced-motion: reduce) {
        /* Disable chatbot background animation */
        .chatbot-container {
            animation: none;
        }
        
        /* Disable glass reflection */
        .chatbot-container::before {
            animation: none;
            opacity: 0.05;
        }
        
        
        /* Simplify message animations */
        .chat-message,
        .chat-message.from-ai::before {
            transition-duration: 0.01ms;
        }
        
        /* Disable pop effect */
        @keyframes messagePop {
            to { 
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }
        
        /* Disable glow pulse */
        @keyframes aiGlowPulseSoft {
            to { /* no animation */ }
        }
        
        /* Static typing cursor */
        @keyframes blink {
            to { opacity: 1; }
        }
        
        /* Disable sparkle animations (handled in sparkle section) */
    }
}

/* ===== FOCUS ACCESSIBILITY ===== */
@layer animations {
    /* Modern focus indicators for interactive elements */
    :focus-visible {
        outline: 2px solid currentColor;
        outline-offset: 2px;
    }
}